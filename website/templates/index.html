{% extends "base.html" %}
{% block title %}Dialogue Platform{% endblock %}
{% block content %}

<section class="py-3 text-center container">
    <div class="row py-lg-4">
        <div class="col-lg-7 col-md-6 mx-auto">
            <h1 class="fw-light" data-i18n="index_title">Dialogue With the Other Side<br></h1>
      
            <p class="lead text-body-secondary" data-i18n="index_p1">
                <br>In times of increasing polarization and online echo chambers, engaging with those
                who think differently is essential for a healthy democratic society.
            </p>

            <p class="lead text-body-secondary" data-i18n="index_p2">
                This platform helps you connect with someone who sees the world differently,
                in a structured and respectful setting. Before being matched, participants
                answer a few questions about political attitudes and personal background.
                Based on this information, the system pairs you with someone who holds
                different views on an important societal issue, such as climate activism,
                AI and employment, or freedom of speech on social media.
            </p>

            <p class="lead text-body-secondary" data-i18n="index_p3">
                Your conversation is structured around a short video, pre-defined questions,
                and a time-limited chat. The goal is not to convince the other person, but
                to understand how they see the world — and to reflect on your own views in
                the process.
            </p>
        </div>
        <div class="col-lg-5 col-md-6 mx-auto">
            <img src="{{ url_for('static', filename='Polarisation21.jpg') }}" 
                 class="rounded mx-auto mb-3" width="100%"/>
            <img src="{{ url_for('static', filename='polarization11.png') }}" 
                 class="rounded mx-auto" width="100%"/>
        </div>
    </div>

    <div class="py-3 text-center">
        <h2 class="fw-light" data-i18n="topics_title">
            Available Discussion Topics ⬇
        </h2>
    </div>
</section>

<style>
    .topic-image {
        width: 100%;
        height: 220px;            /* fixed height for all images */
        object-fit: cover;        /* ensures same size + cropping */
        border-radius: 8px;
    }
    .equal-card {
        height: 100%;
        display: flex;
        flex-direction: column;
    }
    .equal-card-body {
        display: flex;
        flex-direction: column;
        justify-content: space-between; /* evenly distributes content vertically */
        height: 100%;
        padding: 1.5rem;
    }
    .equal-card-body h2 {
        min-height: 3rem;         /* ensure some space for heading */
    }
    .equal-card-body p {
        flex-grow: 1;             /* paragraph grows to fill space */
    }

    .btn-outline-primary {
        color: white;
        background: #007bff;
        border-color: #007bff;
    }
    .btn-outline-primary:hover{
        color: white;
        background: #0053ac;
    }

    @media (min-width: 992px) {
        .col-lg-6 {
            -ms-flex: 0 0 50%;
            flex: 0 0 100%;
            max-width: 75%;
        }
    }
</style>

<!-- 1) SEARCH BAR BELOW THE HEADING -->
<div class="container py-3">
    <div class="row justify-content-center">
        <div class="col-12 d-flex flex-column align-items-center">

            <h4 class="fw-light mb-3 text-center" data-i18n="index_browse_title">
                Browse &amp; Search Topics
            </h4>
            <p class="text-muted text-center" data-i18n="index_browse_text">
                Use the search bar to quickly find one of the current discussion topics.
            </p>

            <!-- Centered search bar, 80% width -->
            <input id="topicSearch"
                   type="text"
                   class="form-control"
                   style="width: 80%; max-width: 650px;"
                   placeholder="Search topics (e.g. climate, AI, speech)..."
                   data-i18n-placeholder="index_search_placeholder">
        </div>
    </div>
</div>


<!-- 2) THREE TOPIC CARDS -->
<div class="album py-3 bg-body-tertiary">
    <div class="container">
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">

            <!-- TOPIC 1: Climate Activism (currently commented out)
            ...
            -->

            <!-- TOPIC 2: Artificial Intelligence & Employment -->
            <div class="col mx-auto topic-card">
                <div class="card shadow-sm equal-card">
                    <div class="card-body text-center equal-card-body">
                        <h2 class="fw-light" data-i18n="index_ai_card_title">Artificial Intelligence &amp; Employment</h2>
                        <img src="{{ url_for('static', filename='AI.jpg') }}" 
                             class="topic-image"/>
                        <p class="card-text lead text-body-secondary mt-3" data-i18n="index_ai_card_desc">
                            Explore how AI is transforming the job market. 
                            Some view AI as a threat to employment, while others argue it creates 
                            new opportunities and enhances human productivity.
                        </p>
                        <form action="{{ url_for('views.home') }}" method="post">
                            <input type="hidden" name="topic" value="ai_employment">
                            <button type="submit" class="btn btn-primary" data-i18n="index_join_btn">Join Discussion</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- TOPIC 3: Freedom of Speech on Social Media -->
            <div class="col mx-auto topic-card">
                <div class="card shadow-sm equal-card">
                    <div class="card-body text-center equal-card-body">
                        <h2 class="fw-light" data-i18n="index_speech_card_title">Freedom of Speech on Social Media</h2>
                        <img src="{{ url_for('static', filename='SM.jpg') }}" 
                             class="topic-image"/>
                        <p class="card-text lead text-body-secondary mt-3" data-i18n="index_speech_card_desc">
                            Debate the role of social media in supporting freedom of speech. 
                            Supporters believe platforms amplify marginalized voices, 
                            while critics worry about misinformation, hate speech, 
                            and algorithmic bias.
                        </p>
                        <form action="{{ url_for('views.home') }}" method="post">
                            <input type="hidden" name="topic" value="freedom_speech">
                            <button type="submit" class="btn btn-primary" data-i18n="index_join_btn">Join Discussion</button>
                        </form>
                    </div>
                </div>
            </div>

                        <!-- TOPIC 3: Facial Recognition and Privacy -->
            <div class="col mx-auto topic-card">
            <div class="card shadow-sm equal-card">
                <div class="card-body text-center equal-card-body">
                <h2 class="fw-light" data-i18n="index_facial_card_title">Facial Recognition and Privacy</h2>
                <img src="{{ url_for('static', filename='facial.jpg') }}" class="topic-image"/>
                <p class="card-text lead text-body-secondary mt-3" data-i18n="index_facial_card_desc">
                    Debate security benefits vs. privacy risks, consent, and surveillance.
                </p>
                <form action="{{ url_for('views.home') }}" method="post">
                    <input type="hidden" name="topic" value="facial_privacy">
                    <button type="submit" class="btn btn-primary" data-i18n="index_join_btn">Join Discussion</button>
                </form>
                </div>
            </div>
            </div>

            <!-- TOPIC 4: Climate Activism and Civil Disobedience -->
            <div class="col mx-auto topic-card">
            <div class="card shadow-sm equal-card">
                <div class="card-body text-center equal-card-body">
                <h2 class="fw-light" data-i18n="index_climate_card_title">Climate Activism and Civil Disobedience</h2>
                <img src="{{ url_for('static', filename='climate.jpg') }}" class="topic-image"/>
                <p class="card-text lead text-body-secondary mt-3" data-i18n="index_climate_card_desc">
                    Discuss disruptive protests, democratic legitimacy, and urgent climate action.
                </p>
                <form action="{{ url_for('views.home') }}" method="post">
                    <input type="hidden" name="topic" value="climate_disobedience">
                    <button type="submit" class="btn btn-primary" data-i18n="index_join_btn">Join Discussion</button>
                </form>
                </div>
            </div>
            </div>

            <!-- TOPIC 5: Universal Basic Income -->
            <div class="col mx-auto topic-card">
            <div class="card shadow-sm equal-card">
                <div class="card-body text-center equal-card-body">
                <h2 class="fw-light" data-i18n="index_ubi_card_title">Universal Basic Income</h2>
                <img src="{{ url_for('static', filename='ubi.jpg') }}" class="topic-image"/>
                <p class="card-text lead text-body-secondary mt-3" data-i18n="index_ubi_card_desc">
                    Explore UBI as security for all vs. cost, fairness, and work incentives.
                </p>
                <form action="{{ url_for('views.home') }}" method="post">
                    <input type="hidden" name="topic" value="universal_basic_income">
                    <button type="submit" class="btn btn-primary" data-i18n="index_join_btn">Join Discussion</button>
                </form>
                </div>
            </div>
            </div>

            <!-- TOPIC 6: Digital Education and Remote Learning -->
            <div class="col mx-auto topic-card">
            <div class="card shadow-sm equal-card">
                <div class="card-body text-center equal-card-body">
                <h2 class="fw-light" data-i18n="index_education_card_title">Digital Education and Remote Learning</h2>
                <img src="{{ url_for('static', filename='education.jpg') }}" class="topic-image"/>
                <p class="card-text lead text-body-secondary mt-3" data-i18n="index_education_card_desc">
                    Discuss effectiveness, access gaps, and the role of tech in learning.
                </p>
                <form action="{{ url_for('views.home') }}" method="post">
                    <input type="hidden" name="topic" value="digital_education">
                    <button type="submit" class="btn btn-primary" data-i18n="index_join_btn">Join Discussion</button>
                </form>
                </div>
            </div>
            </div>

            <!-- TOPIC 7: Data Ownership in the Age of Big Tech -->
            <div class="col mx-auto topic-card">
            <div class="card shadow-sm equal-card">
                <div class="card-body text-center equal-card-body">
                <h2 class="fw-light" data-i18n="index_data_card_title">Data Ownership in the Age of Big Tech</h2>
                <img src="{{ url_for('static', filename='data.jpg') }}" class="topic-image"/>
                <p class="card-text lead text-body-secondary mt-3" data-i18n="index_data_card_desc">
                    Who should control personal data — users, platforms, or society?
                </p>
                <form action="{{ url_for('views.home') }}" method="post">
                    <input type="hidden" name="topic" value="data_ownership">
                    <button type="submit" class="btn btn-primary" data-i18n="index_join_btn">Join Discussion</button>
                </form>
                </div>
            </div>
            </div>

            <!-- TOPIC 8: Automation and Economic Inequality -->
            <div class="col mx-auto topic-card">
            <div class="card shadow-sm equal-card">
                <div class="card-body text-center equal-card-body">
                <h2 class="fw-light" data-i18n="index_automation_card_title">Automation and Economic Inequality</h2>
                <img src="{{ url_for('static', filename='automation.jpg') }}" class="topic-image"/>
                <p class="card-text lead text-body-secondary mt-3" data-i18n="index_automation_card_desc">
                    Explore whether automation concentrates wealth or raises living standards.
                </p>
                <form action="{{ url_for('views.home') }}" method="post">
                    <input type="hidden" name="topic" value="automation_inequality">
                    <button type="submit" class="btn btn-primary" data-i18n="index_join_btn">Join Discussion</button>
                </form>
                </div>
            </div>
            </div>

            <!-- TOPIC 9: Mental Health and Digital Overload -->
            <div class="col mx-auto topic-card">
            <div class="card shadow-sm equal-card">
                <div class="card-body text-center equal-card-body">
                <h2 class="fw-light" data-i18n="index_mental_card_title">Mental Health and Digital Overload</h2>
                <img src="{{ url_for('static', filename='mental.jpg') }}" class="topic-image"/>
                <p class="card-text lead text-body-secondary mt-3" data-i18n="index_mental_card_desc">
                    Discuss attention, stress, social media effects, and digital well-being.
                </p>
                <form action="{{ url_for('views.home') }}" method="post">
                    <input type="hidden" name="topic" value="mental_health_overload">
                    <button type="submit" class="btn btn-primary" data-i18n="index_join_btn">Join Discussion</button>
                </form>
                </div>
            </div>
            </div>

            <!-- TOPIC 10: Ethical Consumption and Fast Fashion -->
            <div class="col mx-auto topic-card">
            <div class="card shadow-sm equal-card">
                <div class="card-body text-center equal-card-body">
                <h2 class="fw-light" data-i18n="index_fashion_card_title">Ethical Consumption and Fast Fashion</h2>
                <img src="{{ url_for('static', filename='fashion.jpg') }}" class="topic-image"/>
                <p class="card-text lead text-body-secondary mt-3" data-i18n="index_fashion_card_desc">
                    Discuss sustainability, labor conditions, and consumer responsibility.
                </p>
                <form action="{{ url_for('views.home') }}" method="post">
                    <input type="hidden" name="topic" value="ethical_fast_fashion">
                    <button type="submit" class="btn btn-primary" data-i18n="index_join_btn">Join Discussion</button>
                </form>
                </div>
            </div>
            </div>

        </div>
    </div>
</div>

<!-- 3) SUGGEST A NEW TOPIC BELOW THE CARDS -->
<div class="container py-3">
    <div class="row">
        <div class="col-lg-6 mx-auto">
            <h4 class="fw-light mb-3 text-center" data-i18n="index_suggest_title">Suggest a New Topic</h4>
            <p class="text-muted text-center" data-i18n="index_suggest_text">
                Is there a topic you care about?
                Propose it here so it can be considered for future discussions.
                All suggestions will be <strong>reviewed by the moderator</strong> to ensure they align with the goals of this platform. 
                If you wish, you may also propose <strong>three discussion questions</strong> (one emotional, one about experience, one future-oriented) 
                together with your topic description. If no questions are provided, the moderator will create them based on our dialogue framework.
            </p>


            <form method="post" action="{{ url_for('views.index') }}">
                <input type="hidden" name="form_type" value="suggest_topic">

                <div class="mb-3">
                    <label for="suggestedTitle" class="form-label" data-i18n="index_suggest_label_title">Topic title</label>
                    <input type="text"
                           class="form-control"
                           id="suggestedTitle"
                           name="title"
                           maxlength="200"
                           required>
                </div>

                <div class="mb-3">
                    <label for="suggestedDescription" class="form-label" data-i18n="index_suggest_label_desc">Short description</label>
                    <textarea class="form-control"
                              id="suggestedDescription"
                              name="description"
                              rows="3"
                              required></textarea>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-outline-primary" data-i18n="index_suggest_submit">
                        Submit topic suggestion
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Simple client-side search: hides topic cards that don't match the query
    const searchInput = document.getElementById('topicSearch');
    if (searchInput) {
        searchInput.addEventListener('input', function () {
            const query = this.value.toLowerCase();
            const cards = document.querySelectorAll('.topic-card');

            cards.forEach(card => {
                const text = card.innerText.toLowerCase();
                card.style.display = text.includes(query) ? '' : 'none';
            });
        });
    }
</script>

{% endblock %}
