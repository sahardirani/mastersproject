{% extends "base.html" %}
{% block titel %}Interaction Waitpage{% endblock %}
{% block content %}
<section class="py-5 text-center container">
    <div class="row py-lg-5">
        
        <div class="col-lg-9 col-md-9 mx-auto">
            <h1 class="fw-light" data-i18n="wait_title">
                Please have patience. 
                <svg xmlns="http://www.w3.org/2000/svg" width="38" height="30" fill="currentColor" class="bi bi-hourglass-split" viewBox="0 0 16 16">
                <path d="M2.5 15a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1 0-1h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11zm2-13v1c0 .537.12 1.045.337 1.5h6.326c.216-.455.337-.963.337-1.5V2h-7zm3 6.35c0 .701-.478 1.236-1.011 1.492A3.5 3.5 0 0 0 4.5 13s.866-1.299 3-1.48V8.35zm1 0v3.17c2.134.181 3 1.48 3 1.48a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351z"/>
              </svg>
            </h1>
            
            <p class="lead text-body-secondary" data-i18n="wait_p1">
                You will be automatically redirected to the interaction as soon as your conversation partner also joins the interaction.
            </p>

            <p class="lead text-body-secondary" data-i18n="wait_p2">
                If your conversation partner does not appear within the next 15 minutes, you can close the application. 
                Please then send a message to <a class="link" href="#">TogetherTolerant@gmail.com</a> explaining the situation.
            </p>
        </div>
    </div>
</section>

<script>
    function sendPostRequest() {
        fetch('/Interaction/WaitingPage', { method: 'POST' })
        .then(response => response.text())
        .then(data => {
            if (data === 'partner_arrived') {
                window.location.href = "climate";
            }
        })
        .catch(error => console.error(error));
    }

    sendPostRequest();
    setInterval(sendPostRequest, 2000);
</script>

{% endblock %}
